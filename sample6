package com.example.awssecrets;

import org.springframework.boot.context.properties.ConfigurationProperties;

import java.time.Duration;
import java.util.List;

@ConfigurationProperties(prefix = "aws.secrets")
public class AwsSecretsProperties {

    /** AWS region, e.g. "us-east-1". If empty, AWS default provider chain is used. */
    private String region;

    /** Optional endpoint (LocalStack/testing). */
    private String endpoint;

    /** If true, preload configured secrets on startup and publish as properties. */
    private boolean preload = true;

    /** Optional refresh interval. If null/zero, no refresh. */
    private Duration refreshInterval;

    /** Startup preload buckets (all optional). */
    private Preload preloadSpec = new Preload();

    public static class Preload {
        /** Secret keys (names) for string/JSON secrets. */
        private List<String> textKeys;
        /** Secret keys (names) for binary secrets. */
        private List<String> binaryKeys;
        /** Secret ARNs for string/JSON secrets. */
        private List<String> arns;
        /** Property prefix applied to published keys, e.g. "db" â†’ db.username. */
        private String propertyPrefix;

        public List<String> getTextKeys() { return textKeys; }
        public void setTextKeys(List<String> textKeys) { this.textKeys = textKeys; }
        public List<String> getBinaryKeys() { return binaryKeys; }
        public void setBinaryKeys(List<String> binaryKeys) { this.binaryKeys = binaryKeys; }
        public List<String> getArns() { return arns; }
        public void setArns(List<String> arns) { this.arns = arns; }
        public String getPropertyPrefix() { return propertyPrefix; }
        public void setPropertyPrefix(String propertyPrefix) { this.propertyPrefix = propertyPrefix; }
    }

    public String getRegion() { return region; }
    public void setRegion(String region) { this.region = region; }
    public String getEndpoint() { return endpoint; }
    public void setEndpoint(String endpoint) { this.endpoint = endpoint; }
    public boolean isPreload() { return preload; }
    public void setPreload(boolean preload) { this.preload = preload; }
    public Duration getRefreshInterval() { return refreshInterval; }
    public void setRefreshInterval(Duration refreshInterval) { this.refreshInterval = refreshInterval; }
    public Preload getPreloadSpec() { return preloadSpec; }
    public void setPreloadSpec(Preload preloadSpec) { this.preloadSpec = preloadSpec; }
}