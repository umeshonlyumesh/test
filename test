import org.junit.jupiter.api.Test;
import org.springframework.aop.aspectj.annotation.AspectJProxyFactory;

import static org.junit.jupiter.api.Assertions.*;

class SdkExecutionTimeAspectPureTest {

    @Test
    void shouldInterceptAndMeasureExecutionTime() throws Throwable {
        // ✅ Create target
        DummyService target = new DummyService();

        // ✅ Apply aspect manually
        AspectJProxyFactory factory = new AspectJProxyFactory(target);
        factory.addAspect(new SdkExecutionTimeAspect());

        DummyService proxy = factory.getProxy();

        // ✅ Call target via proxy (Aspect is triggered)
        String result = proxy.execute("check");

        assertEquals("executed:check", result);
    }

    static class DummyService {
        public String execute(String arg) {
            return "executed:" + arg;
        }
    }
}